<div class="gradebook-container">
  <!-- Page Header -->
  <h2>{{ "Assessment Grades" | translate }}</h2>

  <!-- Student Grades Table with Accordion for Questions -->
  <mat-accordion class="student-accordion" multi>
    <mat-expansion-panel *ngFor="let student of studentGrades">
      <mat-expansion-panel-header>
        <div class="student-header">
          <div class="student-name">
            {{ student.firstName }} {{ student.lastName }}
          </div>
          <div class="assessment-type">
            {{ "Type:" | translate }} {{ selectedAssessmentType | translate }}
          </div>
          <div class="overall-score">
            {{ "Overall Score:" | translate }} {{ student.score }}/{{
              getTotalPoints(student.questions ?? [])
            }}
          </div>
          <div class="feedback">{{ student.feedback }}</div>
        </div>
      </mat-expansion-panel-header>

      <!-- Questions Table -->
      <table
        mat-table
        [dataSource]="student.questions ?? []"
        class="questions-table"
      >
        <!-- Question Text Column -->
         <!-- <ng-container matColumnDef="questionText">
          <th mat-header-cell *matHeaderCellDef>
            {{ "Question" | translate }}
          </th>
          <td mat-cell *matCellDef="let question">
            {{ question.questionText }}
          </td>
        </ng-container>  -->

        <!-- Points Column -->
        <ng-container matColumnDef="points">
          <th mat-header-cell *matHeaderCellDef>{{ "Points" | translate }}</th>
          <td mat-cell *matCellDef="let question">{{ question.points }}</td>
        </ng-container>

        <!-- Score Column -->
        <ng-container matColumnDef="score">
          <th mat-header-cell *matHeaderCellDef>{{ "Score" | translate }}</th>
          <td mat-cell *matCellDef="let question">{{ question.score }}</td>
        </ng-container>

        <!-- Feedback Column -->
        <ng-container matColumnDef="feedback">
          <th mat-header-cell *matHeaderCellDef>
            {{ "Feedback" | translate }}
          </th>
          <td mat-cell *matCellDef="let question">
            {{ question.feedback || ("N/A" | translate) }}
          </td>
        </ng-container>

        <!-- Header and Row Declarations -->
        <tr mat-header-row *matHeaderRowDef="questionColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: questionColumns"></tr>
      </table>
    </mat-expansion-panel>
  </mat-accordion>
</div>
