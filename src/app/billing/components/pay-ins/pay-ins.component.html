<div class="col-12">
  <div class="d-flex align-items-center justify-content-between">
    <div class="--page-actions">
      <button mat-flat-button color="primary"  class="m-r-10" (click)="createPayIn()">
        {{ "Add Pay-In" | translate }}
      </button>
      <button
      mat-flat-button
      color="warn"
      [disabled]="selection.selected.length === 0"
        (click)="deleteSelectedPayIns()"
      >
        {{ "Delete Selected Pay-Ins" | translate }}
      </button>
    </div>
  </div>
</div>

<div class="col-12 payin-margin">
  <div class="card --page-content">
    <mat-form-field appearance="outline">
      <mat-label>{{ "Filter Pay-Ins" | translate }}</mat-label>
      <input matInput (keyup)="filterData($event)" #input />
      <span matTextPrefix><mat-icon>search</mat-icon>&nbsp;&nbsp;</span>
    </mat-form-field>

    <!-- Loader -->
    <div *ngIf="loading" class="loader">{{ "Loading..." | translate }}</div>

    <!-- Table -->
    <div class="table-wrapper" *ngIf="!loading">
      <table
        mat-table
        [dataSource]="dataSource"
        matSort
        class="scrollable-table"
        matSort
      >
        <!-- Checkbox Column -->
        <ng-container matColumnDef="select" sticky>
          <th mat-header-cell *matHeaderCellDef class="mat-select mat-sticky">
            <mat-checkbox
              (change)="$event ? toggleAllRows() : null"
              [checked]="selection.hasValue() && isAllSelected()"
              [indeterminate]="selection.hasValue() && !isAllSelected()"
            >
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row" class="mat-select mat-sticky">
            <mat-checkbox
              (click)="$event.stopPropagation()"
              (change)="$event ? selection.toggle(row) : null"
              [checked]="selection.isSelected(row)"
            >
            </mat-checkbox>
          </td>
        </ng-container>

        <!-- Amount Column -->
        <ng-container matColumnDef="amount">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            class="text-uppercase"
          >
            {{ "Amount" | translate }}
          </th>
          <td mat-cell *matCellDef="let row">{{ row.amount | currency }}</td>
        </ng-container>

        <!-- Description Column -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef class="text-uppercase">
            {{ "Description" | translate }}
          </th>
          <td mat-cell *matCellDef="let row">{{ row.description }}</td>
        </ng-container>

        <!-- Currency Code Column -->
        <ng-container matColumnDef="currencyCode">
          <th mat-header-cell *matHeaderCellDef class="text-uppercase">
            {{ "Currency" | translate }}
          </th>
          <td mat-cell *matCellDef="let row">{{ row.currencyCode }}</td>
        </ng-container>

        <!-- Vendor ID Column -->
        <ng-container matColumnDef="vendorId">
          <th mat-header-cell *matHeaderCellDef class="text-uppercase">
            {{ "Vendor ID" | translate }}
          </th>
          <td mat-cell *matCellDef="let row">{{ row.vendorId || "N/A" }}</td>
        </ng-container>

        <!-- Paid On Column -->
        <ng-container matColumnDef="paidOn">
          <th mat-header-cell *matHeaderCellDef class="text-uppercase">
            {{ "Paid On" | translate }}
          </th>
          <td mat-cell *matCellDef="let row">{{ row.paidOn | date }}</td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
            {{ "Actions" | translate }}
          </th>
          <td mat-cell *matCellDef="let row">
            <a
              (click)="editPayIn(row.payInId)"
              class="m-r-10 cursor-pointer"
              matTooltip="{{ 'Edit' | translate }}"
            >
              <i-tabler name="edit" class="icon-18"></i-tabler>
            </a>
            <a
              (click)="deletePayIn(row.payInId)"
              class="m-r-10 cursor-pointer"
              matTooltip="{{ 'Delete' | translate }}"
            >
              <i-tabler name="trash" class="icon-18"></i-tabler>
            </a>
          </td>
        </ng-container>

        <!-- Header and Row Definitions -->
        <tr mat-header-row *matHeaderRowDef="columns"></tr>
        <tr mat-row *matRowDef="let row; columns: columns"></tr>

        <!-- No Data Row -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="5">
            {{ "No Pay-Ins found" | translate }}
          </td>
        </tr>
      </table>

      <!-- Paginator -->
      <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    </div>
  </div>
</div>
